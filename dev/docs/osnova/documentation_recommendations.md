# Рекомендации по ведению документации ОСНОВА ИТ

## 1. Общие правила
- Пиши кратко и по делу
- Один документ — одна цель
- Используй Markdown
- Избегай устаревших ссылок

## 2. Структура любого документа
1. Назначение
2. Контекст
3. Основное содержание
4. Ограничения
5. Примеры
6. Связанные документы

## 3. Пользовательская документация
- Начинай с цели
- Пиши пошагово
- Используй примеры
- Добавляй FAQ

## 4. Техническая документация
- Фиксируй WHY, а не только HOW
- Используй схемы (Mermaid / PlantUML)
- Описывай контракты и границы

## 5. Интеграции и легаси
- Описывай систему заказчика как внешнюю
- Не допускать правок без документации
- Фиксировать точки отказа

## 6. Шаблоны
Используй утверждённые шаблоны:
- ADR (Architectural Decision Record)
- API Spec
- Integration Guide
- User Manual

## 7. Ревью документации
- Каждая документация проходит review
- Проверяется понятность и актуальность
- Ревью равнозначно code-review

## 8. Подготовка к AI
- Строгая иерархия заголовков
- Минимум лишних слов
- Ясные термины
- Один смысл — один абзац

## 9. Система коммитов
### 9.1 Принципы
- Один коммит — одна логическая правка
- Коммит должен быть понятен без чтения диффа
- Сообщение коммита читается как утверждение
- История должна быть линейной и воспроизводимой

### 9.2 Стандарт сообщений (Conventional Commits)
Формат:
```
<type>(<scope>): <subject>

<body>

<footer>
```

Допустимые типы:
- feat: новая функциональность
- fix: исправление ошибки
- docs: только документация
- refactor: изменение структуры без изменения поведения
- perf: оптимизация производительности
- test: изменения в тестах
- chore: служебные изменения (инфраструктура, сборка)
- ci: изменения в CI/CD
- build: изменения сборки или зависимостей
- revert: откат коммита

Scope (область) обязателен для крупного репозитория: модуль, сервис, пакет, подсистема.

### 9.3 Правила оформления
- Subject: до 72 символов, без точки в конце
- Императив: "add", "fix", "remove", "update"
- Body: зачем и что изменили (не как)
- Footer: ссылки на задачи, релиз-ноты, breaking changes

Примеры:
```
feat(api): add user search endpoint

Add search by email and phone for admin panel.

Refs: PROJ-123
```
```
fix(auth): handle expired refresh tokens

Avoid infinite refresh loop on 401.

BREAKING CHANGE: refresh token TTL changed to 7d
```

### 9.4 Связь с задачами
- Каждый коммит ссылается на задачу в трекере (например, PROJ-123)
- Если задачи нет, в footer указывать причину: "No-Issue: <reason>"

### 9.5 Мердж стратегия
- Основная ветка: `main`
- Работа только через Pull Request
- Squash and merge по умолчанию для чистой истории
- Rebase допускается для технических веток без релизного значения

## 10. Развертывание GitHub практик
### 10.1 Структура репозитория
- README с целью и быстрым стартом
- CONTRIBUTING с правилами разработки и коммитов
- CODEOWNERS для ответственных команд
- Шаблоны Issue и PR

### 10.2 Защита ветки main
- Обязательное ревью минимум 1-2 человек
- Обязательные проверки CI
- Запрет прямых пушей в `main`
- Требование актуальности ветки (up-to-date)

### 10.3 Pull Request workflow
- PR содержит краткое описание, контекст и тесты
- Ссылки на задачи обязательны
- Документация и код меняются в одном PR
- Чеклист качества (тесты, линтеры, безопасность)

### 10.4 Автоматизация и релизы
- Авто-линтеры и тесты на каждый PR
- Генерация CHANGELOG из Conventional Commits
- Тэгирование релизов и авто-нотсы

## 11. Кредо
«Документация — это память компании»
